{"ast":null,"code":"import api, { setCSRFToken } from './api';\nexport const authService = {\n  login: async credentials => {\n    const response = await api.post('/auth/login/', credentials);\n\n    // Salva o CSRF token retornado do login\n    if (response.data.csrf) {\n      setCSRFToken(response.data.csrf);\n    }\n    return response.data;\n  },\n  logout: async () => {\n    const response = await api.post('/auth/logout/');\n    setCSRFToken(null); // Limpa o token no logout\n    return response.data;\n  },\n  checkAuth: async () => {\n    try {\n      const response = await api.get('/auth/check-auth/');\n      console.log(response);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  changePassword: async passwords => {\n    const response = await api.post('/auth/change-password/', passwords);\n    return response.data;\n  },\n  getProfile: async () => {\n    const response = await api.get('/auth/profile/');\n    return response.data;\n  },\n  listUsers: async () => {\n    const response = await api.get('/auth/users/');\n    return response.data;\n  },\n  togglePermission: async (userId, permission) => {\n    const response = await api.post(`/auth/users/${userId}/toggle-permission/`, {\n      perm: `accounts.${permission}` // Adiciona o app_label 'accounts'\n    });\n    return response.data;\n  }\n};\n\n// Serviços para telas protegidas\nexport const screenServices = {\n  tela1: async () => {\n    const response = await api.get('/telas/tela1/');\n    return response.data;\n  },\n  tela2: async () => {\n    const response = await api.get('/telas/tela2/');\n    return response.data;\n  },\n  tela3: async () => {\n    const response = await api.get('/telas/tela3/');\n    return response.data;\n  },\n  suport: async () => {\n    const response = await api.get('/telas/suport/');\n    return response.data;\n  },\n  empresas: {\n    list: async () => {\n      const response = await api.get('/empresas/');\n      return response.data;\n    },\n    create: async data => {\n      const response = await api.post('/empresas/', data);\n      return response.data;\n    },\n    update: async (id, data) => {\n      const response = await api.put(`/empresas/${id}/`, data);\n      return response.data;\n    },\n    delete: async id => {\n      const response = await api.delete(`/empresas/${id}/`);\n      return response.data;\n    }\n  }\n};\n\n// Lista de permissões disponíveis baseadas no seu Meta\nexport const availablePermissions = ['access_tela1', 'access_tela2', 'access_tela3', 'access_suport'];","map":{"version":3,"names":["api","setCSRFToken","authService","login","credentials","response","post","data","csrf","logout","checkAuth","get","console","log","error","changePassword","passwords","getProfile","listUsers","togglePermission","userId","permission","perm","screenServices","tela1","tela2","tela3","suport","empresas","list","create","update","id","put","delete","availablePermissions"],"sources":["/home/nbreier/Documents/Projects/Faculdade/Contabil/react-auth-frontend/src/services/auth.js"],"sourcesContent":["import api, { setCSRFToken } from './api';\n\nexport const authService = {\n  login: async (credentials) => {\n    const response = await api.post('/auth/login/', credentials);\n    \n    // Salva o CSRF token retornado do login\n    if (response.data.csrf) {\n      setCSRFToken(response.data.csrf);\n    }\n    \n    return response.data;\n  },\n\n  logout: async () => {\n    const response = await api.post('/auth/logout/');\n    setCSRFToken(null); // Limpa o token no logout\n    return response.data;\n  },\n\n  checkAuth: async () => {\n    try {\n      const response = await api.get('/auth/check-auth/');\n      console.log(response)\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  changePassword: async (passwords) => {\n    const response = await api.post('/auth/change-password/', passwords);\n    return response.data;\n  },\n\n  getProfile: async () => {\n    const response = await api.get('/auth/profile/');\n    return response.data;\n  },\n\n  listUsers: async () => {\n    const response = await api.get('/auth/users/');\n    return response.data;\n  },\n\n  togglePermission: async (userId, permission) => {\n    const response = await api.post(`/auth/users/${userId}/toggle-permission/`, {\n      perm: `accounts.${permission}` // Adiciona o app_label 'accounts'\n    });\n    return response.data;\n  }\n};\n\n// Serviços para telas protegidas\nexport const screenServices = {\n  tela1: async () => {\n    const response = await api.get('/telas/tela1/');\n    return response.data;\n  },\n\n  tela2: async () => {\n    const response = await api.get('/telas/tela2/');\n    return response.data;\n  },\n\n  tela3: async () => {\n    const response = await api.get('/telas/tela3/');\n    return response.data;\n  },\n\n  suport: async () => {\n    const response = await api.get('/telas/suport/');\n    return response.data;\n  },\n\n  empresas: {\n    list: async () => {\n      const response = await api.get('/empresas/');\n      return response.data;\n    },\n    create: async (data) => {\n      const response = await api.post('/empresas/', data);\n      return response.data;\n    },\n    update: async (id, data) => {\n      const response = await api.put(`/empresas/${id}/`, data);\n      return response.data;\n    },\n    delete: async (id) => {\n      const response = await api.delete(`/empresas/${id}/`);\n      return response.data;\n    }\n  }\n};\n\n// Lista de permissões disponíveis baseadas no seu Meta\nexport const availablePermissions = [\n  'access_tela1',\n  'access_tela2', \n  'access_tela3',\n  'access_suport'\n];"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}